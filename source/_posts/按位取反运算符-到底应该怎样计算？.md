---
title: 按位取反运算符 (~) 到底应该怎样计算？
date: 2017-04-22 17:03:55
tags: [C 语言]
categories: 编程
---
**二进制数在内存中以补码的形式存储。**

按位取反：二进制每一位取反，0 变 1，1 变 0。
```
~9 的计算步骤：
转二进制：0 1001
计算补码：0 1001
按位取反：1 0110
_____
转为原码：
按位取反：1 1001   
末位加一：1 1010
符号位为 1 是负数，即 - 10

```


``` 
~-9 的计算步骤：
转二进制：1 1001
计算补码：1 0111
按位取反：0 1000
_____
转为原码：
正数的补码和原码相同，仍为：0 1000，即 8
```
---
原码表示法在数值前面增加了一位符号位（即最高位为符号位）：正数该位为 0，负数该位为 1（0 有两种表示：+0 和 - 0），其余位表示数值的大小。例如，用 8 位二进制表示一个数，+11 的原码为 00001011，-11 的原码就是 10001011。
反码表示法规定：正数的反码与其原码相同；负数的反码是对其原码逐位取反，但符号位除外。
补码表示法规定：正数的补码与其原码相同；负数的补码是在其反码的末位加 1。

（1） 原码：在数值前直接加一符号位的表示法。
[+7] 原 = 0 0000111 B
[-7] 原 = 1 0000111 B
注意：
a. 数 0 的原码有两种形式：
[+0] 原 = 0 0000000 B
[-0] 原 = 1 0000000 B
b. 8 位二进制原码的表示范围：-127～+127

（2）反码：
正数：正数的反码与原码相同。
负数：负数的反码，符号位为 “1”，数值部分按位取反。
[+7] 反 = 0 0000111 B
[-7] 反 = 1 1111000 B
注意：
a. 数 0 的反码也有两种形式，即
[+0] 反 = 0 0000000 B
[-0] 反 = 1 1111111 B
b. 8 位二进制反码的表示范围：-127～+127

（3）补码
正数：正数的补码和原码相同。
负数：负数的补码则是符号位为 “1”。并且，这个“1” 既是符号位，也是数值位。数值部分按位取反后再在末位（最低位）加 1。也就是“反码 + 1”。
求负整数的补码，原码符号位不变，先将原码减去 1，最后数值各位取反。（但由于 2 进制的特殊性，通常先使数值位各位取反，最后整个数加 1。）

例如： 符号位 数值位
[+7] 补 = 0 0000111 B
[-7] 补 = 1 1111001 B
注意：
a. 采用补码后，可以方便地将减法运算转化成加法运算，运算过程得到简化。正数的补码即是它所表示的数的真值，而负数的补码的数值部份却不是它所表示的数的真值。采用补码进行运算，所得结果仍为补码。
b. 与原码、反码不同，数值 0 的补码只有一个，即 [0] 补 = 00000000B。
c. 若字长为 8 位，则补码所表示的范围为 - 128～+127；进行补码运算时，应注意所得结果不应超过补码所能表示数的范围。

转化为原码

已知一个数的补码，求原码的操作其实就是对该补码再求补码：
⑴如果补码的符号位为 “0”，表示是一个正数，其原码就是补码。
⑵如果补码的符号位为 “1”，表示是一个负数，那么求给定的这个补码的补码就是要求的原码。
